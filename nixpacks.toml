[phases.install]
cmds = ["npm ci --include=optional"]

[phases.build]
cmds = [
  "npx prisma generate",
  "npm run build"
]

[phases.deploy]
# PostgreSQL 마이그레이션 적용 (배포 시 자동 실행)
# 첫 배포 시 모든 마이그레이션이 순차적으로 적용됨
cmds = ["npx prisma migrate deploy"]

[start]
# Next.js 프로덕션 서버 시작
# Railway가 자동으로 포트를 할당함
cmd = "npm start"
